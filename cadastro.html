<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - Universo Sorteio</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 50px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
    }
    h1 {
      color: #ff5733;
    }
    form {
      margin-top: 20px;
    }
    input {
      width: 80%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
    }
    button {
      padding: 10px 20px;
      background: #ff5733;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #e65c00;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Cadastro de Participantes</h1>
    <p>Preencha os campos abaixo para participar do sorteio!</p>
    <form id="cadastroForm">
      <input type="email" id="email" placeholder="Digite seu e-mail" required>
      <input type="tel" id="whatsapp" placeholder="Digite seu WhatsApp" required>
      <button type="submit">Cadastrar</button>
    </form>
  </div>
  // Função para cadastrar os participantes
async function cadastrarParticipante(e) {
    e.preventDefault(); // Evita o envio do formulário

    // Captura os dados do formulário
    const nome = document.getElementById('nome').value;
    const email = document.getElementById('email').value;
    const whatsapp = document.getElementById('whatsapp').value;

    // Preenche automaticamente o campo data_cadastro com a data atual
    const dataCadastro = new Date().toISOString();  // Data atual no formato ISO
    document.getElementById('data_cadastro').value = dataCadastro;

    // Preenche o campo numero_sorteio com um número gerado aleatoriamente
    const numeroSorteio = Math.floor(Math.random() * 10000);  // Exemplo de número sorteado
    document.getElementById('numero_sorteio').value = numeroSorteio;

    // Envia os dados para o banco de dados
    try {
        const { data, error } = await supabase
            .from('universo_sorteio')  // Nome da tabela no Supabase
            .insert([
                {
                    nome: nome,
                    email: email,
                    whatsapp: whatsapp,
                    data_cadastro: dataCadastro,
                    numero_sorteio: numeroSorteio
                }
            ]);

        if (error) {
            console.error('Erro ao cadastrar participante:', error);
            alert('Erro ao cadastrar, tente novamente.');
        } else {
            alert(`Cadastro realizado!\nE-mail: ${email} \nWhatsApp: ${whatsapp}`);
        }
    } catch (err) {
        console.error('Erro no try-catch:', err);
        alert('Erro no processo, tente novamente!');
    }
}

// Adiciona o ouvinte de evento para o envio do formulário
document.getElementById('cadastroForm').addEventListener('submit', cadastrarParticipante);
const SUPABASE_URL = "https://runpfgacmjemflyecubp.supabase.co";  // Substitua pela sua URL do Supabase
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ1bnBmZ2FjbWplbWZseWVjdWJwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0MDUyODczOCwiZXhwIjoyMDU2MTA0NzM4fQ.3MD4q-DssyXdBUOw1IcrU9FAQZCdpiEElCz55kfz0js"; // Substitua pela sua chave Anon do Supabase

const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// Enviar os dados para o Supabase
supabase
    .from('universo_sorteio') // Nome da sua tabela no Supabase
    .insert([
        { email: email, whatsapp: whatsapp }
    ])
    .then(({ data, error }) => {
        if (error) {
            console.error('Erro ao inserir dados:', error);
        } else {
            alert('Dados cadastrados com sucesso!');
        }
    }); Aqui você pode adicionar a lógica para enviar os dados para um servidor ou armazená-los.
    });
  </script>
</body>
</html>
